<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    #status, #details { font-size: 1.2em; }
  </style>
</head>
<body>
  <p id="status">Initializing redirect...</p>
  <p>If you are not redirected automatically, 
    <a id="redirect-link" href="#">click here</a>.
  </p>
  <p id="details" style="color: #888; font-size: 0.9em;"></p>

  <script>
    (function() {
        try {
            // Hardcoded base URL for the Cloudflare tunnel.
            const cloudflareBaseUrl = "https://commissioner-announce-optimum-foam.trycloudflare.com";

            // Get the full query string from the current URL (e.g., "?path=workflow-action&token=...")
            const queryString = window.location.search;

            // Construct the final URL by appending the original query string to the Cloudflare base URL.
            const finalUrl = cloudflareBaseUrl + queryString;

            document.getElementById('status').textContent = 'Redirecting...';
            document.getElementById('details').textContent = 'To: ' + (new URL(cloudflareBaseUrl)).hostname;
            document.getElementById('redirect-link').href = finalUrl;

            // Perform the automatic redirect.
            window.location.replace(finalUrl);

        } catch (e) {
            document.getElementById('status').textContent = 'Critical error during redirect.';
            document.getElementById('details').textContent = e.message;
        }
    })();
  </script>
</body>
</html>
