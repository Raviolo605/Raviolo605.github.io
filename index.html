<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <!-- Lo script automatico sostituirÃ  questo URL -->
  <meta http-equiv="refresh" content="0; url=https://raviolo605.github.io/" />
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    #status, #details { font-size: 1.2em; }
  </style>
</head>
<body>
  <p id="status">Initializing redirect...</p>
  <p>If you are not redirected automatically, 
    <a id="redirect-link" href="https://raviolo605.github.io/">click here</a>.
  </p>
  <p id="details" style="color: #888; font-size: 0.9em;"></p>

  <script>
    (function() {
        try {
            const params = new URLSearchParams(window.location.search);
            const cfUrl = params.get('cf-url');

            if (!cfUrl) {
                throw new Error("Cloudflare URL parameter ('cf-url') is missing.");
            }

            // Decode the Cloudflare URL
            const decodedCfUrl = decodeURIComponent(cfUrl);

            // Validate the URL format
            if (!decodedCfUrl.startsWith('http')) {
                throw new Error("Invalid Cloudflare URL format.");
            }

            const finalUrl = new URL(decodedCfUrl);
            // Preserve other query parameters (like token) from the original redirector URL
            params.delete('cf-url');
            finalUrl.search = params.toString();
            
            document.getElementById('status').textContent = 'Redirecting...';
            document.getElementById('details').textContent = 'To: ' + finalUrl.hostname;
            
            document.getElementById('redirect-link').href = finalUrl.href;

            window.location.replace(finalUrl.href);
        } catch (e) {
            document.getElementById('status').textContent = 'Critical error during redirect.';
            document.getElementById('details').textContent = e.message;
        }
    })();
  </script>
</body>
</html>

