<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <!-- Lo script automatico sostituirÃ  questo URL -->
  <meta http-equiv="refresh" content="0; url=https://raviolo605.github.io/" />
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    #status, #details { font-size: 1.2em; }
  </style>
</head>
<body>
  <p id="status">Initializing redirect...</p>
  <p>If you are not redirected automatically, 
    <a id="redirect-link" href="https://raviolo605.github.io/">click here</a>.
  </p>
  <p id="details" style="color: #888; font-size: 0.9em;"></p>

  <script>
    (function() {
        const statusElement = document.getElementById('status');
        const detailsElement = document.getElementById('details');
        const linkElement = document.getElementById('redirect-link');

        try {
            const params = new URLSearchParams(window.location.search);
            const cfUrl = params.get('cf-url');

            if (!cfUrl) {
                throw new Error("URL parameter 'cf-url' is missing.");
            }

            detailsElement.textContent = 'Decoding URL...';
            const finalUrl = decodeURIComponent(cfUrl);
            
            // --- DEBUGGING STEP ---
            // Display the URL we are about to use.
            detailsElement.textContent = 'Decoded URL: ' + finalUrl;

            if (!finalUrl || !finalUrl.startsWith('http')) {
                throw new Error("Invalid or non-HTTP URL format after decoding.");
            }
            
            statusElement.textContent = 'Redirecting...';
            linkElement.href = finalUrl;

            // Try to parse for display, but redirect with the raw string
            try {
                detailsElement.textContent = 'Redirecting to host: ' + (new URL(finalUrl)).hostname;
            } catch (parseError) {
                detailsElement.textContent = 'Could not parse hostname, but attempting redirect anyway.';
            }

            window.location.replace(finalUrl);
        } catch (e) {
            statusElement.textContent = 'Critical error during redirect.';
            // Append the error to any existing debug message
            detailsElement.textContent = detailsElement.textContent + ' | ERROR: ' + e.message;
        }
    })();
  </script>
</body>
</html>

