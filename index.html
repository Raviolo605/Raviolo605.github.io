<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <!-- Lo script automatico sostituirÃ  questo URL -->
  <meta http-equiv="refresh" content="0; url=https://raviolo605.github.io/" />
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    #status, #details { font-size: 1.2em; }
  </style>
</head>
<body>
  <p id="status">Initializing redirect...</p>
  <p>If you are not redirected automatically, 
    <a id="redirect-link" href="https://raviolo605.github.io/">click here</a>.
  </p>
  <p id="details" style="color: #888; font-size: 0.9em;"></p>

  <script>
    (function() {
        const statusElement = document.getElementById('status');
        const detailsElement = document.getElementById('details');
        const linkElement = document.getElementById('redirect-link');

        try {
            statusElement.textContent = 'Analyzing redirect link...';
            const params = new URLSearchParams(window.location.search);
            const cfUrl = params.get('cf-url');

            if (!cfUrl) {
                throw new Error("URL parameter 'cf-url' is missing.");
            }

            // --- DIAGNOSTIC STEP ---
            const rawParamDiv = document.createElement('div');
            rawParamDiv.style.wordBreak = 'break-all';
            rawParamDiv.style.padding = '10px';
            rawParamDiv.style.backgroundColor = '#eee';
            rawParamDiv.innerText = 'Raw "cf-url" parameter: ' + cfUrl;
            document.body.appendChild(rawParamDiv);
            // -------------------------

            const finalUrl = decodeURIComponent(cfUrl);

            // --- DIAGNOSTIC STEP ---
            const decodedUrlDiv = document.createElement('div');
            decodedUrlDiv.style.wordBreak = 'break-all';
            decodedUrlDiv.style.padding = '10px';
            decodedUrlDiv.style.backgroundColor = '#ddd';
            decodedUrlDiv.innerText = 'Decoded URL: ' + finalUrl;
            document.body.appendChild(decodedUrlDiv);
            // -------------------------

            if (!finalUrl || !finalUrl.startsWith('http')) {
                throw new Error("Invalid URL format after decoding.");
            }
            
            statusElement.textContent = 'Ready to redirect.';
            detailsElement.textContent = 'Click the link below to proceed.';
            linkElement.href = finalUrl;
            linkElement.textContent = finalUrl; // Show the full URL in the link itself

        } catch (e) {
            statusElement.textContent = 'Critical error while preparing redirect.';
            detailsElement.textContent = e.message;
        }
    })();
  </script>
</body>
</html>

