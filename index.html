<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    #status, #details { font-size: 1.2em; }
    #error-info { 
        margin-top: 20px; 
        padding: 15px; 
        background-color: #fdd; 
        border: 1px solid #f00;
        word-break: break-all;
        text-align: left;
    }
  </style>
</head>
<body>
  <p id="status">Initializing redirect...</p>
  <p>If you are not redirected automatically, 
    <a id="redirect-link" href="#">click here</a>.
  </p>
  <p id="details" style="color: #888; font-size: 0.9em;"></p>

          <script>
        (function() {
            try {
                const baseUrl = "new";
                
                // Crea un oggetto URL per la destinazione.
                const finalUrl = new URL(baseUrl);
                
                // Prendi l'intera query string (?path=...&token=...) dalla pagina corrente
                // e assegnala in modo sicuro all'URL di destinazione.
                // Questo Ã¨ il modo piÃ¹ robusto per copiare tutti i parametri.
                finalUrl.search = window.location.search;
                
                document.getElementById('status').textContent = 'Reindirizzamento in corso...';
                document.getElementById('details').textContent = 'A ' + finalUrl.href;
                
                // Esegui il reindirizzamento
                window.location.replace(finalUrl.href);
            } catch (e) {
                document.getElementById('status').textContent = 'Errore critico durante il reindirizzamento.';
                document.getElementById('details').textContent = e.message;
            }
        })();
    </script>
</body>
</html>


