<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to Secure Portal...</title>
  <meta http-equiv="refresh" content="0; url=https://commissioner-announce-optimum-foam.trycloudflare.com/workflow-action?token=" />
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 50px;
    }
  </style>
</head>
<body>

  <p>Redirecting to the Secure Portal...</p>
  <p>
    If you are not redirected automatically, 
    <a id="redirect-link" href="https://commissioner-announce-optimum-foam.trycloudflare.com/workflow-action?token=">
      click here
    </a>.
  </p>

  <script>
    // Passa il token dall'URL della pagina di redirect all'URL del tunnel
    document.addEventListener("DOMContentLoaded", function () {
      const params = new URLSearchParams(window.location.search);
      const token = params.get('token');

      if (token) {
        const newUrl = "https://commissioner-announce-optimum-foam.trycloudflare.com/workflow-action?token=" +
                       encodeURIComponent(token);

        // Aggiorna meta refresh
        const meta = document.querySelector('meta[http-equiv="refresh"]');
        meta.setAttribute('content', '0; url=' + newUrl);

        // Aggiorna link fallback
        document.getElementById('redirect-link').href = newUrl;

        // Redirect immediato
        window.location.replace(newUrl);
      }
    });
  </script>

</body>
</html>
